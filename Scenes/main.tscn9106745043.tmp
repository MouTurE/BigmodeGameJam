[gd_scene format=3 uid="uid://svlkarkrh5si"]

[ext_resource type="Script" uid="uid://dubwlqpux2ryr" path="res://Scripts/timer.gd" id="1_jkdf5"]
[ext_resource type="Script" uid="uid://dt3pchm8vu5n1" path="res://Scripts/EnemyAI.gd" id="2_wsu2k"]
[ext_resource type="Script" uid="uid://cmv08nto87fbf" path="res://Scripts/area.gd" id="3_k12tt"]
[ext_resource type="Texture2D" uid="uid://efh303bhoc6h" path="res://icon.svg" id="4_h1bgf"]
[ext_resource type="Texture2D" uid="uid://drnspmmwatt03" path="res://Sprites/551e94ae8845df9d455f221c07421dcd.jpg" id="5_b3802"]
[ext_resource type="Texture2D" uid="uid://bl435sfc2wwd6" path="res://Sprites/d204d7256977f11f733a7ddd73c92e5e.jpg" id="6_fevyy"]
[ext_resource type="Texture2D" uid="uid://y70td6oml0qi" path="res://Sprites/clean.png" id="7_hibaj"]
[ext_resource type="Script" uid="uid://bmt0bg75l5vr3" path="res://Scripts/drag_object.gd" id="8_pdsj5"]
[ext_resource type="Texture2D" uid="uid://cms8tv6iba0yc" path="res://Sprites/spill.png" id="9_ee4r6"]
[ext_resource type="Script" uid="uid://bgllh31ecpvet" path="res://Scripts/window.gd" id="10_gt3je"]
[ext_resource type="Texture2D" uid="uid://w4ryfn5heqvi" path="res://Sprites/forestImage.png" id="11_3pmx8"]
[ext_resource type="Texture2D" uid="uid://7crjd2v60uqe" path="res://Sprites/monsterImage.png" id="12_u50mg"]
[ext_resource type="AudioStream" uid="uid://b3oknk4a8h3fb" path="res://SoundEffects/violindanger-83476.mp3" id="13_cbgmd"]
[ext_resource type="AudioStream" uid="uid://d2ltngpye0j4j" path="res://SoundEffects/varrendo-101422.mp3" id="14_1w6v2"]

[sub_resource type="LabelSettings" id="LabelSettings_mf2t3"]
font_color = Color(0, 0, 0, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lquwl"]
size = Vector2(126.98419, 126.98417)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7mycd"]
size = Vector2(739.99994, 703.33325)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kek77"]
size = Vector2(225.59998, 223.07692)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4c57u"]
size = Vector2(226.52853, 224.70169)

[node name="main" type="Node2D" unique_id=226836632]

[node name="Camera2D" type="Camera2D" parent="." unique_id=1898127815]

[node name="CanvasLayer" type="CanvasLayer" parent="Camera2D" unique_id=137492000]
layer = 0

[node name="UserInterface" type="Control" parent="Camera2D/CanvasLayer" unique_id=1825818504 node_paths=PackedStringArray("enemyTimer")]
show_behind_parent = true
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("1_jkdf5")
seconds2hour = 10
enemyTimer = NodePath("../../../EnemyAI/ActionTimer")

[node name="Label" type="Label" parent="Camera2D/CanvasLayer/UserInterface" unique_id=1144276559]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -48.0
offset_bottom = 23.0
grow_horizontal = 0
text = "12 AM"
horizontal_alignment = 2

[node name="ClockTimer" type="Timer" parent="Camera2D/CanvasLayer/UserInterface" unique_id=210825434]

[node name="GoBackZone" type="Button" parent="Camera2D/CanvasLayer/UserInterface" unique_id=1507966907]
visible = false
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -539.0
offset_top = -56.0
offset_right = 539.0
offset_bottom = -16.0
grow_horizontal = 2
grow_vertical = 0

[node name="Label" type="Label" parent="Camera2D/CanvasLayer/UserInterface/GoBackZone" unique_id=382105062]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
rotation = -1.5707964
pivot_offset = Vector2(20, 11.5)
text = "<"
label_settings = SubResource("LabelSettings_mf2t3")
horizontal_alignment = 1
vertical_alignment = 1

[node name="EnemyAI" type="Node2D" parent="." unique_id=1681171232 node_paths=PackedStringArray("dragObject", "gameObject")]
top_level = true
position = Vector2(0, -2)
script = ExtResource("2_wsu2k")
dragObject = NodePath("../Floor/DragObject")
gameObject = NodePath("../Camera2D/CanvasLayer/UserInterface")

[node name="ActionTimer" type="Timer" parent="EnemyAI" unique_id=1359130202]
wait_time = 5.0

[node name="AttackTimer" type="Timer" parent="EnemyAI" unique_id=14696987]
wait_time = 5.0
one_shot = true

[node name="MainArea" type="Node2D" parent="." unique_id=1180442570 node_paths=PackedStringArray("goBackNode", "floorNode", "windowNode") groups=["Area"]]
visible = false
script = ExtResource("3_k12tt")
goBackNode = NodePath("../Camera2D/CanvasLayer/UserInterface/GoBackZone")
floorNode = NodePath("../Floor")
windowNode = NodePath("../Window")

[node name="FloorSprite" type="Sprite2D" parent="MainArea" unique_id=2024982147]
position = Vector2(-112, 0)
texture = ExtResource("4_h1bgf")

[node name="FloorArea2D" type="Area2D" parent="MainArea/FloorSprite" unique_id=814395456]

[node name="CollisionShape2D" type="CollisionShape2D" parent="MainArea/FloorSprite/FloorArea2D" unique_id=191643625]
position = Vector2(0, -2.649095e-06)
scale = Vector2(0.9999996, 0.9999996)
shape = SubResource("RectangleShape2D_lquwl")

[node name="WindowSprite" type="Sprite2D" parent="MainArea" unique_id=1208172149]
position = Vector2(302, -78)
scale = Vector2(0.3, 0.3)
texture = ExtResource("5_b3802")

[node name="WindowArea2D" type="Area2D" parent="MainArea/WindowSprite" unique_id=2115227566]

[node name="CollisionShape2D" type="CollisionShape2D" parent="MainArea/WindowSprite/WindowArea2D" unique_id=1907867056]
position = Vector2(3.333374, -1.6666565)
shape = SubResource("RectangleShape2D_7mycd")

[node name="Floor" type="Node2D" parent="." unique_id=282460574 groups=["Area"]]
visible = false

[node name="Sprite2D" type="Sprite2D" parent="Floor" unique_id=647128902]
scale = Vector2(0.35, 0.35)
texture = ExtResource("6_fevyy")

[node name="DragObject" type="Sprite2D" parent="Floor" unique_id=1710986338 node_paths=PackedStringArray("enemyNode", "messNode", "cleaningSound", "alertSound")]
position = Vector2(-419, 107)
scale = Vector2(0.8333333, 0.78)
texture = ExtResource("7_hibaj")
script = ExtResource("8_pdsj5")
enemyNode = NodePath("../../EnemyAI")
messNode = NodePath("../Mess")
cleaningSound = NodePath("../../FloorWipe")
alertSound = NodePath("../../AlertPlayer")

[node name="Area2D" type="Area2D" parent="Floor/DragObject" unique_id=1503805565]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Floor/DragObject/Area2D" unique_id=2097515427]
position = Vector2(-1.5, -0.9615326)
scale = Vector2(0.9999998, 1)
shape = SubResource("RectangleShape2D_kek77")

[node name="Mess" type="Sprite2D" parent="Floor" unique_id=1688510333]
visible = false
scale = Vector2(-1.6421772, -1.6421772)
texture = ExtResource("9_ee4r6")

[node name="Area2D" type="Area2D" parent="Floor/Mess" unique_id=593833390]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Floor/Mess/Area2D" unique_id=1161425930]
position = Vector2(-1.8583605e-05, -0.91344)
scale = Vector2(0.9999999, 0.9999999)
shape = SubResource("RectangleShape2D_4c57u")

[node name="Window" type="Node2D" parent="." unique_id=1322719373 groups=["Area"]]
script = ExtResource("10_gt3je")

[node name="ForestImage" type="Sprite2D" parent="Window" unique_id=120077146]
visible = false
position = Vector2(-1.0000305, -0.9999962)
scale = Vector2(2.099278, 2.4395604)
texture = ExtResource("11_3pmx8")

[node name="MonsterImage" type="Sprite2D" parent="Window" unique_id=244329708]
visible = false
position = Vector2(6.500003, -4.999981)
scale = Vector2(2.60515, 2.0925925)
texture = ExtResource("12_u50mg")

[node name="AlertPlayer" type="AudioStreamPlayer2D" parent="." unique_id=1997256148]
stream = ExtResource("13_cbgmd")
volume_db = -10.0

[node name="FloorWipe" type="AudioStreamPlayer2D" parent="." unique_id=1838940081]
stream = ExtResource("14_1w6v2")
volume_db = 15.0

[connection signal="timeout" from="Camera2D/CanvasLayer/UserInterface/ClockTimer" to="Camera2D/CanvasLayer/UserInterface" method="_on_timer_timeout"]
[connection signal="timeout" from="EnemyAI/ActionTimer" to="EnemyAI" method="_on_timer_timeout"]
[connection signal="timeout" from="EnemyAI/AttackTimer" to="EnemyAI" method="_on_attack_timer_timeout"]
[connection signal="input_event" from="MainArea/FloorSprite/FloorArea2D" to="MainArea" method="_on_floor_area_2d_input_event"]
[connection signal="mouse_entered" from="MainArea/FloorSprite/FloorArea2D" to="MainArea" method="_on_floor_area_2d_mouse_entered"]
[connection signal="mouse_exited" from="MainArea/FloorSprite/FloorArea2D" to="MainArea" method="_on_floor_area_2d_mouse_exited"]
[connection signal="input_event" from="MainArea/WindowSprite/WindowArea2D" to="MainArea" method="_on_window_area_2d_input_event"]
[connection signal="mouse_entered" from="MainArea/WindowSprite/WindowArea2D" to="MainArea" method="_on_floor_area_2d_mouse_entered"]
[connection signal="mouse_exited" from="MainArea/WindowSprite/WindowArea2D" to="MainArea" method="_on_floor_area_2d_mouse_exited"]
[connection signal="input_event" from="Floor/DragObject/Area2D" to="Floor/DragObject" method="_on_area_2d_input_event"]
[connection signal="mouse_entered" from="Floor/DragObject/Area2D" to="Floor/DragObject" method="_on_area_2d_mouse_entered"]
[connection signal="mouse_exited" from="Floor/DragObject/Area2D" to="Floor/DragObject" method="_on_area_2d_mouse_exited"]
[connection signal="area_entered" from="Floor/Mess/Area2D" to="Floor/DragObject" method="_on_area_2d_area_entered"]
[connection signal="area_exited" from="Floor/Mess/Area2D" to="Floor/DragObject" method="_on_area_2d_area_exited"]
